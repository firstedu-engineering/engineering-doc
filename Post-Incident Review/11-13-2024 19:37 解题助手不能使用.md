# Post-Incident Review: Student Portal Redirect Loop Issue

---

## 1. 事件概述

- **事件名称：** 解题助手报404、500错误
- **发生日期：** 11-13-2024 15:15
- **影响范围：** 学生端用户
- **事件类型：** 服务中断
- **事件等级：** 中
- **事件负责人：** 杨帆

---

## 2. 事件时间线

| 时间       | 事件       | 描述                                    | 负责人 |
|----------|----------|---------------------------------------| ------ |
| 15:15    | 发布       |                                       |        |
| 19:37    | 通报       | 问题被Nick发现后，发送到微信群中                    |        |
| 19:37    | 响应开始     | 团队开始分析问题                              |        |
| 20:18    | 解决404的问题 | 部署kuixing，ai-adapter服务                |        |
| 20:36    | 解决500的问题 | Open AI Assistant prod环境的配置输出类型改成Json |        |
| 第二天16:00 | 回顾会      | 召开 PIR 会议，讨论问题根因及改进措施                 |        |

---

## 3. 事件影响

- **对业务的影响：**

  - 学生端用户无法使用AI解题助手功能

---

## 4. 根因分析

- **事件原因概述：**

  - 上线前遗漏部署kuixing，ai-adapter服务。
  - Open AI Assistant prod环境的配置与Test环境的配置不一致。

- **根因分类：**

  - 上线发布管理

- **详细原因分析：**
  - 
  - 没有AI ASSISTANT相关功能的发布管理 

---

## 5. 响应和恢复措施

- **恢复措施：**

  - 部署Kuixing， AI-Adapter服务。
  - 修改AI ASSISTANT prod配置。

- **恢复时间：**
  - 回滚修复耗时 30 分钟，从 20:11 到 20:36。

---


## 6. 结论与后续行动

- **后续行动列表：**

  1. Story下的comment要注明修改过的服务。
  2. 部署Stories之前在群里确认下这次部署涉及到的所有服务。
  3. 部署完之后，各个Story相关负责人在Prod环境点击确认功能没有问题。
  4. AI相关功能部署之前需要人工确认一下Open AI ASSISTANT配置Test和Prod没有区别。
